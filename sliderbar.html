<!DOCTYPE html>
<!--
Please implement slider bar which behaves and looks like as seen in the attached video,
using HTML/CSS/JavaScript but without using <input type="range">.

container background color: #313131
track height: 6px
track width: 500px
tick width: 2px
tick height: 16px
track and ticks color: #565656
thumb size: 40px diameter
thumb color: #ffffff
-->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ischemaview sliderbar</title>
    <script src="dist/sliderbar.min.js"></script>
    <link rel="stylesheet" href="dist/sliderbar.min.css"></link>
    <style>
      /* style for demo only */
      [q_model=sliderValue] {
        font-size: 24px;
        width: 40px;
        border-radius: 10px;
        padding: 5px;
      }
      /* default hidden before q_if evaluated */
      [q_if] {
        visibility: hidden;
      }
    </style>
    <script>

      const defaultValue = 0;

      // _$$: jQuery-ish selector shortcut
      const _$$ = (selector) => { return document.querySelectorAll(selector); }

      //ProxRox: simple home-brewed data-binding proxy with hooks to DOM-declarative tags (a la Angular, Vue, etc)
      class ProxRox {

        constructor(defaults) {
          return Object.assign(new Proxy({}, this.proxyTraps()),defaults);
        }
        
        proxyTraps() {
          return {
            set(target, prop, value) {
              // q_model, binds value to DOM
              _$$(`[q_model="${prop}"]`).forEach((bindEle) => { bindEle.nodeName == 'INPUT' ? bindEle.value = value : bindEle.innerText = value; });

              // q_if, simple show/hide on prop existing
              _$$(`[q_if="${prop}"]`).forEach((ifEle) => ifEle.style.visibility = value ? 'visible' : 'hidden');
              
              // Reflection allows object access to [set] proxy trap 
              return Reflect.set(target, prop, value);
            }
          }
        }
      
      }

      // load everything up
      window.addEventListener('load',() => { 

        // create binding scope with defaults
        const scope = new ProxRox({
          sliderValue: defaultValue,
          dragValue: null
        })

        // get pertinent DOM elements to pass into sliderbar domElements config param
        const domElements = Object.assign( {}, ...['container','track','thumb'].map(ele => {
          return { [ele] : _$$(`.${ele}`)[0] };
        }));

        // build sliderbar config params
        const sliderBarConfig = {
          domElements,
          range: {
            min: 0,
            max: 10,
            step: 1, 
          },
          value: defaultValue,
          snap: true,
          onDrag: (val) => {
            scope.dragValue = val;
          },
          onUpdated: (val) => {
            Object.assign(scope,{
              dragValue: null,
              sliderValue: val
            });
          }
        }

        // sliderBar instance
        const sliderBarDemo = new sliderBar(sliderBarConfig);

        // update handler from input change
        window.updateSliderBarVal = (val) => {
          sliderBarDemo.setValue(Math.round(val));
        }

      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="track">
        <div class="thumb"></div>
      </div>
    </div>
    <div style="padding:50px 10px;">
      Slider value = <input type="number" q_model="sliderValue" step="1" onInput="updateSliderBarVal(this.value)"> 
      <span q_if="dragValue">[Drag value = <span q_model="dragValue"></span>]<br>
    </div>
  </body>
</html>